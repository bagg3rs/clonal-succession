<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Growing Cell Cage Simulation</title>
  <style>
    body {
      background: #111;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    svg {
      background: #222;
      border: 1px solid #555;
    }
    .cell {
      fill: #4fc3f7;
      stroke: white;
      stroke-width: 1;
    }
    .cage {
      fill: none;
      stroke: #00e676;
      stroke-width: 3;
    }
  </style>
</head>
<body>
  <svg id="sim" width="600" height="600" viewBox="0 0 600 600">
    <rect class="cage" x="100" y="100" width="400" height="400" rx="20" ry="20" />
  </svg>

  <script>
    const svg = document.getElementById("sim");
    let cells = [{ x: 300, y: 300 }];
    let cage = { x: 100, y: 100, width: 400, height: 400 };

    function drawCells() {
      // Remove old cells
      svg.querySelectorAll(".cell").forEach(cell => svg.removeChild(cell));

      // Draw new cells
      for (const c of cells) {
        const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circle.setAttribute("cx", c.x);
        circle.setAttribute("cy", c.y);
        circle.setAttribute("r", 8);
        circle.setAttribute("class", "cell");
        svg.appendChild(circle);
      }
    }

    function updateCage() {
      const cageEl = svg.querySelector(".cage");

      // Increase cage size based on number of cells
      const growth = Math.min(150, cells.length * 2); // Limit growth
      cage.width = 400 + growth;
      cage.height = 400 + growth;
      cage.x = 300 - cage.width / 2;
      cage.y = 300 - cage.height / 2;

      cageEl.setAttribute("x", cage.x);
      cageEl.setAttribute("y", cage.y);
      cageEl.setAttribute("width", cage.width);
      cageEl.setAttribute("height", cage.height);
    }

    function divideCells() {
      const newCells = [];
      for (const c of cells) {
        // 40% chance to divide
        if (Math.random() < 0.4) {
          const angle = Math.random() * 2 * Math.PI;
          const dist = 20;
          newCells.push({
            x: c.x + Math.cos(angle) * dist,
            y: c.y + Math.sin(angle) * dist
          });
        }
      }
      cells = [...cells, ...newCells];
    }

    function tick() {
      divideCells();
      updateCage();
      drawCells();
    }

    drawCells();
    setInterval(tick, 1500); // Run simulation every 1.5s
  </script>
</body>
</html>
